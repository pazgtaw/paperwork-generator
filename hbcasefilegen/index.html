<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homicide Bureau Casefile Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .form-group {
            margin-bottom: 10px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }

        .output-box {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #000;
            background-color: #f9f9f9;
            white-space: pre-wrap;
        }

        .output-box .copy-btn {
            display: block;
            margin-bottom: 10px;
        }

        button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        button.clear-btn {
            background-color: #dc3545;
        }
    </style>
</head>
<body>
    <h1>Homicide Bureau Casefile</h1>

    <div class="form-group">
        <label for="classification">Classification / Penal Code(s):</label>
        <input type="text" id="classification" placeholder="Enter Classification / Penal Code(s)">
    </div>

    <div class="form-group">
        <label for="time_date">Time & Date:</label>
        <input type="text" id="time_date" placeholder="Enter Time & Date">
    </div>

    <div class="form-group">
        <label for="location">Location:</label>
        <input type="text" id="location" placeholder="Enter Location">
    </div>

    <div class="form-group">
        <label for="handling_investigator">Handling Investigator:</label>
        <input type="text" id="handling_investigator" placeholder="Enter Handling Investigator">
    </div>

    <div class="form-group">
        <label for="additional_investigators">Additional Investigator(s):</label>
        <textarea id="additional_investigators" placeholder="Enter Additional Investigator(s)"></textarea>
    </div>

    <div id="persons-section">
        <div class="form-group">
            <label for="person_1">Person #1</label>
            <input type="text" id="person_1" placeholder="Enter Person #1 Name">
            <input type="text" id="person_1_classification" placeholder="Enter Classification (Victim / Suspect / Witness / Informant)">
            <input type="text" id="person_1_dob" placeholder="Enter Date of Birth">
            <input type="text" id="person_1_phone" placeholder="Enter Phone Number">
            <input type="text" id="person_1_residence" placeholder="Enter Residence">
            <input type="text" id="person_1_properties" placeholder="Enter Other Properties">
            <input type="text" id="person_1_gang_affiliation" placeholder="Enter Gang Affiliation">
            <input type="url" id="person_1_mdc_link" placeholder="Enter MDC Profile Picture Link">
        </div>
    </div>
    <button onclick="addPerson()">Add More Persons</button>

    <div class="form-group">
        <label for="brief">Brief:</label>
        <textarea id="brief" placeholder="Enter Brief"></textarea>
    </div>

    <div class="form-group">
        <label for="narrative">Narrative:</label>
        <textarea id="narrative" placeholder="Enter Narrative"></textarea>
    </div>

    <div id="exhibits-section">
        <div class="form-group">
            <label for="exhibit_a">Exhibit A</label>
            <input type="text" id="exhibit_a" placeholder="Enter Exhibit A Description">
            <textarea id="exhibit_a_spoiler" placeholder="Enter Exhibit A Spoiler"></textarea>
        </div>
    </div>
    <button onclick="addExhibit()">Add More Exhibits</button>

    <button onclick="generateBBCode()">Generate BBCode</button>
    <button class="clear-btn" onclick="clearForm()">Clear Boxes</button>

    <div class="output-box" id="output-box">
        <button class="copy-btn" onclick="copyBBCode()">Copy BBCode</button>
        <div id="bbcode-output"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const savedNameRank = getCookie('handling_investigator');
            if (savedNameRank) {
                document.getElementById('handling_investigator').value = savedNameRank;
            }
        });

        document.getElementById('handling_investigator').addEventListener('input', () => {
            setCookie('handling_investigator', document.getElementById('handling_investigator').value, 365);
        });

        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value};expires=${d.toUTCString()};path=/`;
        }

        function getCookie(name) {
            const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
            return match ? match[2] : null;
        }

        function addPerson() {
            const personsSection = document.getElementById('persons-section');
            const personCount = personsSection.children.length + 1;

            const newPerson = document.createElement('div');
            newPerson.className = 'form-group';
            newPerson.innerHTML = `
                <label for="person_${personCount}">Person #${personCount}</label>
                <input type="text" id="person_${personCount}" placeholder="Enter Person #${personCount} Name">
                <input type="text" id="person_${personCount}_classification" placeholder="Enter Classification (Victim / Suspect / Witness / Informant)">
                <input type="text" id="person_${personCount}_dob" placeholder="Enter Date of Birth">
                <input type="text" id="person_${personCount}_phone" placeholder="Enter Phone Number">
                <input type="text" id="person_${personCount}_residence" placeholder="Enter Residence">
                <input type="text" id="person_${personCount}_properties" placeholder="Enter Other Properties">
                <input type="text" id="person_${personCount}_gang_affiliation" placeholder="Enter Gang Affiliation">
                <input type="url" id="person_${personCount}_mdc_link" placeholder="Enter MDC Profile Picture Link">
            `;
            personsSection.appendChild(newPerson);
        }

        function addExhibit() {
            const exhibitsSection = document.getElementById('exhibits-section');
            const exhibitCount = exhibitsSection.children.length + 1;

            const newExhibit = document.createElement('div');
            newExhibit.className = 'form-group';
            newExhibit.innerHTML = `
                <label for="exhibit_${String.fromCharCode(64 + exhibitCount)}">Exhibit ${String.fromCharCode(64 + exhibitCount)}</label>
                <input type="text" id="exhibit_${String.fromCharCode(64 + exhibitCount)}" placeholder="Enter Exhibit ${String.fromCharCode(64 + exhibitCount)} Description">
                <textarea id="exhibit_${String.fromCharCode(64 + exhibitCount)}_spoiler" placeholder="Enter Exhibit ${String.fromCharCode(64 + exhibitCount)} Spoiler"></textarea>
            `;
            exhibitsSection.appendChild(newExhibit);
        }

        function generateBBCode() {
            let bbcode = '[font=Arial][color=black]\n\n';
            bbcode += '[center][img]https://i.imgur.com/LEWTXbL.png[/img]\n\n';
            bbcode += '[size=125][b]SHERIFF\'S DEPARTMENT\nCOUNTY OF LOS SANTOS[/b]\n[i]"A Tradition of Service Since 1850"[/i][/size]\n\n';
            bbcode += '[size=110][u]CASE PACKAGE[/u][/size][/center][hr][/hr]\n\n';
            bbcode += '[font=arial][color=black][indent][size=105][b]Investigative Background and Assignment[/b][/size]\n\n[indent]\n';
            bbcode += `[b]Classification / Penal Code(s):[/b] ${document.getElementById('classification').value}\n`;
            bbcode += `[b]Time & Date:[/b] ${document.getElementById('time_date').value}\n`;
            bbcode += `[b]Location:[/b] ${document.getElementById('location').value}\n\n`;
            bbcode += `[b]Handling Investigator:[/b] ${document.getElementById('handling_investigator').value}\n`;
            bbcode += `[b]Additional Investigator(s):[/b] ${document.getElementById('additional_investigators').value}\n`;
            bbcode += '[/indent]\n\n';
            bbcode += '[size=105][b]Involved Persons[/b][/size]\n[indent]\n';

            for (let i = 1; i <= document.getElementById('persons-section').children.length; i++) {
                bbcode += `[u]Person #${i} - ${document.getElementById('person_' + i).value}[/u] [aligntable=right,0,0,55,0,0,0][img]${document.getElementById('person_' + i + '_mdc_link').value}[/img][/aligntable]\n`;
                bbcode += `[b]Classification:[/b] ${document.getElementById('person_' + i + '_classification').value}\n`;
                bbcode += `[b]Date of Birth:[/b] ${document.getElementById('person_' + i + '_dob').value}\n`;
                bbcode += `[b]Phone Number:[/b] ${document.getElementById('person_' + i + '_phone').value}\n`;
                bbcode += `[b]Residence:[/b] ${document.getElementById('person_' + i + '_residence').value}\n`;
                bbcode += `[b]Other Properties:[/b] ${document.getElementById('person_' + i + '_properties').value}\n`;
                bbcode += `[b]Gang Affiliation:[/b] ${document.getElementById('person_' + i + '_gang_affiliation').value}\n\n`;
            }

            bbcode += '[/indent]\n\n[size=105][b]Narrative[/b][/size]\n[indent]\n';
            bbcode += `[b]BRIEF:[/b] ${document.getElementById('brief').value}\n\n`;
            bbcode += `${document.getElementById('narrative').value}\n`;
            bbcode += '[/indent]\n\n[size=105][b]Evidence[/b][/size]\n';

            for (let i = 1; i <= document.getElementById('exhibits-section').children.length; i++) {
                bbcode += `[list][*][b]Exhibit ${String.fromCharCode(64 + i)}; ${document.getElementById('exhibit_' + String.fromCharCode(64 + i)).value}[/b]\n`;
                bbcode += `[spoiler]${document.getElementById('exhibit_' + String.fromCharCode(64 + i) + '_spoiler').value}[/spoiler][/list]\n`;
            }

            document.getElementById('bbcode-output').textContent = bbcode;
        }

        function copyBBCode() {
            const output = document.getElementById('bbcode-output');
            navigator.clipboard.writeText(output.textContent);
            alert('BBCode copied to clipboard!');
        }

        function clearForm() {
            document.querySelectorAll('input, textarea').forEach(input => input.value = '');
            document.getElementById('bbcode-output').textContent = '';
        }
    </script>
</body>
</html>
