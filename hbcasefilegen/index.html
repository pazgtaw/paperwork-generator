<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homicide Bureau Casefile Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            font-weight: bold;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }
        button {
            padding: 10px 20px;
            background-color: #333;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #555;
        }
        .output-container {
            margin-top: 20px;
        }
        .output-container textarea {
            height: 400px;
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
</head>
<body>
    <h1>Homicide Bureau Casefile Form</h1>
    <div class="form-group">
        <label for="classification">Classification / Penal Code(s):</label>
        <input type="text" id="classification">
    </div>
    <div class="form-group">
        <label for="time-date">Time & Date:</label>
        <input type="text" id="time-date">
    </div>
    <div class="form-group">
        <label for="location">Location:</label>
        <input type="text" id="location">
    </div>
    <div class="form-group">
        <label for="handling-investigator">Handling Investigator (Rank Forename Surname):</label>
        <input type="text" id="handling-investigator">
    </div>
    <div class="form-group">
        <label for="additional-investigators">Additional Investigator(s) (Rank Forename Surname):</label>
        <input type="text" id="additional-investigators">
    </div>
    <div class="form-group">
        <label for="person1-name">Person #1 - Forename Surname:</label>
        <input type="text" id="person1-name">
    </div>
    <div class="form-group">
        <label for="person1-classification">Person #1 Classification:</label>
        <input type="text" id="person1-classification">
    </div>
    <div class="form-group">
        <label for="person1-dob">Person #1 Date of Birth:</label>
        <input type="text" id="person1-dob">
    </div>
    <div class="form-group">
        <label for="person1-link">Person #1 Profile Picture Link:</label>
        <input type="text" id="person1-link">
    </div>
    <!-- Repeat similar fields for Person #2 and Person #3 -->
    <div class="form-group">
        <label for="narrative-brief">Narrative Brief:</label>
        <textarea id="narrative-brief"></textarea>
    </div>
    <div class="form-group">
        <label for="narrative">Narrative:</label>
        <textarea id="narrative"></textarea>
    </div>
    <!-- Add fields for Evidence, Exhibit A, B, C -->
    <button onclick="generateBBCode()">Generate BBCode</button>
    <button onclick="clearForm()">Clear Boxes</button>

    <div class="output-container">
        <h2>Generated BBCode</h2>
        <button onclick="copyBBCode()">Copy BBCode</button>
        <textarea id="output" readonly></textarea>
    </div>

    <script>
        function saveToCookie(name, value) {
            document.cookie = name + "=" + value + ";path=/;expires=Fri, 31 Dec 9999 23:59:59 GMT";
        }

        function getFromCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        document.getElementById("handling-investigator").value = getFromCookie("investigatorName") || "";

        function generateBBCode() {
            let classification = document.getElementById("classification").value;
            let timeDate = document.getElementById("time-date").value;
            let location = document.getElementById("location").value;
            let handlingInvestigator = document.getElementById("handling-investigator").value;
            let additionalInvestigators = document.getElementById("additional-investigators").value;
            let person1Name = document.getElementById("person1-name").value;
            let person1Classification = document.getElementById("person1-classification").value;
            let person1DOB = document.getElementById("person1-dob").value;
            let person1Link = document.getElementById("person1-link").value;
            let narrativeBrief = document.getElementById("narrative-brief").value;
            let narrative = document.getElementById("narrative").value;
            
            // Save investigator's name to cookie
            saveToCookie("investigatorName", handlingInvestigator);

            let bbcode = `[font=Arial][color=black]

[center][img]https://i.imgur.com/LEWTXbL.png[/img]

[size=125][b]SHERIFF'S DEPARTMENT
COUNTY OF LOS SANTOS[/b]
[i]"A Tradition of Service Since 1850"[/i][/size]

[size=110][u]CASE PACKAGE[/u][/size][/center][hr][/hr]

[font=arial][color=black][indent][size=105][b]Investigative Background and Assignment[/b][/size]

[indent]
[b]Classification / Penal Code(s):[/b] ${classification}
[b]Time & Date:[/b] ${timeDate}
[b]Location:[/b] ${location}

[b]Handling Investigator:[/b] ${handlingInvestigator}
[b]Additional Investigator(s):[/b] ${additionalInvestigators}
[/indent]

[size=105][b]Involved Persons[/b][/size]
[indent][u]Person #1 - ${person1Name}[/u] [aligntable=right,0,0,55,0,0,0][img]${person1Link}[/img][/aligntable]
[b]Classification:[/b] ${person1Classification}
[b]Date of Birth:[/b] ${person1DOB}

[size=105][b]Narrative[/b][/size]
[indent][b]BRIEF:[/b] ${narrativeBrief}

${narrative}[/indent]

[size=105][b]Evidence[/b][/size]

[list][*][b]Exhibit A; Description of evidence[/b]
[spoiler][/spoiler][/list]
[list][*][b]Exhibit B; Description of evidence[/b]
[spoiler][/spoiler][/list]
[list][*][b]Exhibit C; Description of evidence[/b]
[spoiler][/spoiler][/list]`;

            document.getElementById("output").value = bbcode;
        }

        function copyBBCode() {
            let output = document.getElementById("output");
            output.select();
            document.execCommand("copy");
            alert("BBCode copied to clipboard!");
        }

        function clearForm() {
            document.querySelectorAll("input[type='text'], textarea").forEach(input => input.value = "");
        }
    </script>
</body>
</html>
